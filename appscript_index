<!DOCTYPE html>
<html>
<head>
    <title>Tesla SipariÅŸ Takip Botu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta charset="UTF-8">
</head>
<body class="bg-gray-800 text-white font-sans">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-8">Tesla SipariÅŸ Takip Botu</h1>
        
        <!-- Authentication Section -->
        <div id="auth-section" class="mb-8 bg-gray-700 p-6 rounded-lg shadow-lg">
            <p class="text-lg mb-3">Tesla hesabÄ±nÄ±zla yetkilendirme yapmak iÃ§in aÅŸaÄŸÄ±daki baÄŸlantÄ±ya tÄ±klayÄ±n ve giriÅŸ yapÄ±n:</p>
            <button id="auth-button" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-200" onclick="startAuth()">Yetkilendir</button>
            <a id="auth-link" class="mt-4 text-blue-400 hover:text-blue-300 underline hidden block break-all" target="_blank">Yetkilendirme baÄŸlantÄ±sÄ± burada gÃ¶rÃ¼necek</a>
            <div id="code-input-section" class="mt-4 hidden">
                <label for="auth-code" class="block text-lg mb-2">"Page Not Found" yazan sayfanÄ±n URL'sini buraya yapÄ±ÅŸtÄ±rÄ±n:</label>
                <input id="auth-code" type="text" class="block w-full bg-gray-600 text-white border border-gray-500 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Kod veya URL girin">
                <button class="bg-green-600 text-white mt-3 px-6 py-2 rounded-lg hover:bg-green-700 transition-colors" onclick="submitCode()">Kodu GÃ¶nder</button>
            </div>
        </div>

        <div id="loading-spinner" class="hidden fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50">
            <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-blue-500 border-solid"></div>
        </div>

        <!-- Orders Section -->
        <div id="orders-section" class="hidden">
            <h2 class="text-2xl font-semibold mb-4">SipariÅŸleriniz</h2>
            <div id="orders-list" class="space-y-6"></div>
            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 mt-4" onclick="refreshOrders()">SipariÅŸleri Yenile</button>
        </div>
    </div>

    <script>
        // Tesla TÃ¼rkiye lokasyon kodlarÄ±
        const locationMap = {
            425125: 'Tesla Armada AVM, Ankara',
            445210: 'Tesla Ferko Line, Ä°stanbul',
            449153: 'Tesla Istanbul Meydan AVM, Ä°stanbul',
            451952: 'Tesla Ä°stinyePark Ä°zmir, Ä°zmir',
            410805: 'Tesla Ankara Delivery Hub, Ankara',
            442359: 'Tesla Delivery Istanbul, Ä°stanbul',
            460569: 'Tesla Delivery Gaziemir, 33 SarnÄ±Ã§ Yolu, Ä°zmir'
        };

        // mktOptions kodlarÄ±
        const mktOptionsMap = {
            'IPB7': 'Siyah Ä°Ã§ Mekan',
            'PN00': 'Quicksilver',
            'SC04': 'Ãœcretli Supercharger',
            'MDLY': 'Model Y',
            'WY19P': '19" Beyaz Jantlar',
            'MTY46': 'Standart Range',
            'STY5S': '5 Koltuklu',
            'CPF0': 'Standart BaÄŸlantÄ±',
            // DiÄŸer kodlar (gerekirse ekle)
            'APBS': 'Otopilot',
                    'PPSB': 'Deep Blue',
                    'PR00': 'Midnight Cherry Red',
                    'PR01': 'Ultra Red',
                    'PMNG': 'Midnight Silver Metallic',
                    'PPSW': 'Pearl White Multi-Coat',
                    'PBSB': 'Solid Black',
                    'PN01': 'Stealth Grey',
                    'PPMR': 'Red Multi-Coat',
                    // Yeni tablodan kodlar
                    'ACL1': 'Ludicrous Modu',
                    'AD02': 'NEMA 14-50 AdaptÃ¶rÃ¼',
                    'AD04': 'Avrupa 3-Faz AdaptÃ¶rÃ¼',
                    'AD05': 'Avrupa 3-Faz, IT AdaptÃ¶rÃ¼',
                    'AD06': 'Schuko AdaptÃ¶rÃ¼ (1 faz, 230V 13A)',
                    'AD07': 'KÄ±rmÄ±zÄ± IEC309 AdaptÃ¶rÃ¼ (3 faz, 400V 16A)',
                    'AD08': 'Mavi Åarj AdaptÃ¶rÃ¼',
                    'AD09': 'Ä°sviÃ§re AdaptÃ¶rÃ¼ (1 faz, 10A)',
                    'AD10': 'Danimarka AdaptÃ¶rÃ¼ (1 faz, 13A)',
                    'AD11': 'Ä°talya AdaptÃ¶rÃ¼ (1 faz, 13A)',
                    'AD15': 'AdaptÃ¶r',
                    'ADPX2': 'Tip 2 Genel Åarj KonektÃ¶rÃ¼',
                    'ADX4': 'Avrupa 3-Faz Yok',
                    'ADX5': 'Avrupa 3-Faz, IT',
                    'ADX6': 'Schuko AdaptÃ¶rÃ¼ Yok (1 faz, 13A)',
                    'ADX7': '3-Faz KÄ±rmÄ±zÄ± IEC309 Yok (3 faz, 16A)',
                    'ADX8': 'Mavi IEC309 (1 faz, 230V 32A)',
                    'ADX9': 'Ä°sviÃ§re AdaptÃ¶rÃ¼ Yok (1 faz, 10A)',
                    'AF00': 'HEPA Filtresi Yok',
                    'AF02': 'HEPA Filtresi',
                    'AH00': 'Aksesuar Ã‡eki Demiri Yok',
                    'AL03': 'Ä°Ã§ Mekan RGB AydÄ±nlatma',
                    'AP04': 'Otopilot 4.0',
                    'APB1': 'Otopilot Konfor Ã–zellikleri',
                    'APF0': 'Otopilot YazÄ±lÄ±mÄ± 2.0 Temel',
                    'APF1': 'Otopilot YazÄ±lÄ±mÄ± 2.0 GeliÅŸtirilmiÅŸ',
                    'APF2': 'Tam Otonom SÃ¼rÃ¼ÅŸ DonanÄ±mÄ± (Aktif)',
                    'APFB': 'Tam Otonom SÃ¼rÃ¼ÅŸ DonanÄ±mÄ±',
                    'APH1': 'DonanÄ±m 1.0',
                    'APH2': 'DonanÄ±m 2.0',
                    'APH3': 'DonanÄ±m 2.5',
                    'APH4': 'DonanÄ±m 3.0',
                    'APPA': 'Otopilot DonanÄ±mÄ± 1',
                    'APPB': 'GeliÅŸtirilmiÅŸ Otopilot',
                    'APPF': 'Tam Otonom SÃ¼rÃ¼ÅŸ YeteneÄŸi',
                    'AU00': 'Ses Paketi Yok',
                    'AU01': 'Ultra YÃ¼ksek Sadakat Ses',
                    'AU3D': 'Ses StÃ¼dyo Paketi',
                    'AU3P': 'Ses StÃ¼dyo Paketi',
                    'AUF1': 'Premium HoparlÃ¶rler Aktif',
                    'AUF2': 'Premium HoparlÃ¶rler Pasif',
                    'BC00': 'Fren Kaliperleri M4.42/44',
                    'BC0B': 'Siyah Fren Kaliperleri',
                    'BC0R': 'KÄ±rmÄ±zÄ± Fren Kaliperleri',
                    'BC3B': 'Siyah Fren Kaliperleri',
                    'BC3R': 'Siyah Fren Kaliperleri, KÄ±rmÄ±zÄ±',
                    'BC50': 'Performans Frenleri P2',
                    'BCMB': 'Siyah Fren Kaliperleri (Mando)',
                    'BCYR': 'Performans Frenleri',
                    'BG30': 'Rozet Yok',
                    'BG31': 'Ã‡ift Ã‡eker Rozeti (Ã‡izgisiz)',
                    'BG32': 'Performans Ã‡ift Ã‡eker Rozeti',
                    'BG33': 'Ã‡in Rozeti',
                    'BP00': 'Ludicrous Yok',
                    'BP01': 'Ludicrous HÄ±z YÃ¼kseltmesi',
                    'BP02': 'Serbest HÄ±zlanma',
                    'BR00': 'Batarya YazÄ±lÄ±m SÄ±nÄ±rÄ± Yok',
                    'BR03': 'Batarya YazÄ±lÄ±m SÄ±nÄ±rÄ± (60kWh)',
                    'BR05': 'Batarya YazÄ±lÄ±m SÄ±nÄ±rÄ± (75kWh)',
                    'BS00': 'KÃ¶r Nokta SensÃ¶rleri Yok',
                    'BS01': 'Ã–zel Ãœretim BayraÄŸÄ±',
                    'BT00': '68 kWh (Model Y) 4680 hÃ¼creler',
                    'BT01': '60kWh BYD 7C Blade',
                    'BT35': '50 kWh (Model 3/Y) 2021 Ã–ncesi Panasonic',
                    'BT36': '62.5 kWh (Model 3/Y) 2021 Ã–ncesi Panasonic',
                    'BT37': '75 kWh (Model 3/Y) 2021 Ã–ncesi Panasonic',
                    'BT38': '74 kWh (Model 3/Y) LG hÃ¼creleri',
                    'BT3D': '50 kWh (Model 3)',
                    'BT40': '40 kWh',
                    'BT41': '55 kWh 2021 E1 2170L Panasonic',
                    'BT42': '82 kWh (Model 3/Y) 2021 Panasonic',
                    'BT43': '79 kWh (Model 3/Y) 2021 LG NCA',
                    'BT60': '60 kWh',
                    'BT70': '70 kWh',
                    'BT85': '85 kWh',
                    'BTF0': '55 kWh 2020 CATL Prizmatik',
                    'BTF1': '60 kWh E1 LFP60 CATL Batarya',
                    'BTX4': '90 kWh',
                    'BTX5': '75 kWh',
                    'BTX6': '100 kWh',
                    'BTX7': '75 kWh',
                    'BTX8': '75 kWh',
                    'BTX9': '100 kWh Batarya Paketi (AÄŸÄ±rlÄ±k AzaltmalÄ±)',
                    'BTXA': '18650J2 Batarya HÃ¼cresi',
                    'BTXB': '99kWh 18650 Plaid E5/E6 VIN batarya',
                    'BY00': 'Model Y',
                    'BY01': 'Tek ParÃ§a DÃ¶kÃ¼m Arka Alt GÃ¶vde',
                    'BY02': 'Tek ParÃ§a DÃ¶kÃ¼m Ã–n ve Arka Alt GÃ¶vde',
                    'BY03': 'GÃ¼venlik AÄŸÄ± GÃ¶vdesi',
                    'BY04': 'Tek ParÃ§a DÃ¶kÃ¼m Arka GÃ¼venlik AÄŸÄ± GÃ¶vdesi',
                    'CC01': 'BeÅŸ Koltuklu Ä°Ã§ Mekan',
                    'CC02': 'AltÄ± Koltuklu Ä°Ã§ Mekan',
                    'CC03': 'Yedi Koltuklu Ä°Ã§ Mekan',
                    'CC04': 'Yedi Koltuklu Ä°Ã§ Mekan',
                    'CC12': 'Orta Konsollu AltÄ± Koltuklu Ä°Ã§ Mekan',
                    'CDM0': 'CHAdeMO Åarj AdaptÃ¶rÃ¼ Yok',
                    'CF00': '72amp YÃ¼ksek GÃ¼Ã§ Åarj CihazÄ±',
                    'CF01': '48amp Åarj CihazÄ±',
                    'CH00': 'Standart Åarj CihazÄ± (40 Amp)',
                    'CH01': 'Ã‡ift Åarj CihazÄ± (80 Amp)',
                    'CH04': '72 Amp YÃ¼ksek Amperaj Åarj CihazÄ± Gen3',
                    'CH05': '32/48 Amp Åarj CihazÄ±',
                    'CH06': '48 Amp Åarj CihazÄ±',
                    'CH07': '48 Amp Åarj CihazÄ±',
                    'CH09': 'Tesla Standart Åarj Sistemi 72a (Gen3)',
                    'CH11': 'Tek Faz 48 Amperaj Combo 1',
                    'CH12': '48 Amperaj Combo 1 Gen 3.5 Åarj CihazÄ±',
                    'CH14': '32 Amp Åarj CihazÄ± DonanÄ±mÄ± (RENA) BusbarlÄ±',
                    'CH15': '48 Amp Åarj CihazÄ± DonanÄ±mÄ± (REEU/REAP) BusbarlÄ±',
                    'CH16': '48 Amp Åarj CihazÄ± DonanÄ±mÄ± (RENA) BusbarlÄ±',
                    'CH17': '48 Amp 1PH&3PH, P2',
                    'COAT': 'Ãœlke: Avusturya',
                    'COAU': 'Ãœlke: Avustralya',
                    'COBE': 'Ãœlke: BelÃ§ika',
                    'COCA': 'Ãœlke: Kanada',
                    'COCH': 'Ãœlke: Ä°sviÃ§re',
                    'COCN': 'Ãœlke: Ã‡in',
                    'CODE': 'Ãœlke: Almanya',
                    'CODK': 'Ãœlke: Danimarka',
                    'COES': 'Ãœlke: Ä°spanya',
                    'COFI': 'Ãœlke: Finlandiya',
                    'COFR': 'Ãœlke: Fransa',
                    'COGB': 'Ãœlke: BirleÅŸik KrallÄ±k',
                    'COHR': 'Ãœlke: HÄ±rvatistan',
                    'COIE': 'Ãœlke: Ä°rlanda',
                    'COIL': 'Ãœlke: Ä°srail',
                    'COIT': 'Ãœlke: Ä°talya',
                    'COJP': 'Ãœlke: Japonya',
                    'COKR': 'Ãœlke: GÃ¼ney Kore',
                    'COL0': 'Ä°mza',
                    'COL1': 'DÃ¼z Renk',
                    'COL2': 'Metalik',
                    'COL3': 'Tesla Ã‡ok KatmanlÄ±',
                    'COLU': 'Ãœlke: LÃ¼ksemburg',
                    'CONL': 'Ãœlke: Hollanda',
                    'CONO': 'Ãœlke: NorveÃ§',
                    'CONZ': 'Ãœlke: Yeni Zelanda',
                    'COPT': 'Ãœlke: Portekiz',
                    'COSE': 'Ãœlke: Ä°sveÃ§',
                    'COSG': 'Ãœlke: Singapur',
                    'COTR': 'Ãœlke: TÃ¼rkiye',
                    'COUS': 'Ãœlke: Amerika BirleÅŸik Devletleri',
                    'CP00': 'Kuzey Amerika Åarj Portu (TPC)',
                    'CP01': 'Åarj Portu Gen? CCS boyutu',
                    'CP03': 'CCS2 Entegre Åarj Portu',
                    'CPF1': 'Premium BaÄŸlantÄ±',
                    'CPW1': '20" Performans JantlarÄ±',
                    'CR01': 'Sanden Ä°thal KompresÃ¶r',
                    'CR02': 'Denso Ä°thal KompresÃ¶r',
                    'CW00': 'SoÄŸuk Hava Paketi Yok',
                    'CW02': 'Subzero SoÄŸuk Hava Paketi',
                    'DA00': 'Otopilot Yok',
                    'DA01': 'Aktif GÃ¼venlik (ACC, LDW, SA)',
                    'DA02': 'Otopilot Konfor Ã–zellikleri',
                    'DCF0': 'Ã–n Konsol DÃ¼ÅŸÃ¼rme Yok',
                    'DCF2': 'Ã–n Konsol EndÃ¼ktif Telefon Åarj CihazÄ±',
                    'DRLH': 'Soldan Direksiyon',
                    'DRRH': 'SaÄŸdan Direksiyon',
                    'DSH5': 'PUR GÃ¶sterge Paneli',
                    'DSH7': 'Alcantara GÃ¶sterge Paneli AksanlarÄ±',
                    'DSHG': 'Grafit KaplamalÄ± GÃ¶sterge Paneli',
                    'DU00': 'SÃ¼rÃ¼cÃ¼ Ãœnitesi - IR',
                    'DU01': 'SÃ¼rÃ¼cÃ¼ Ãœnitesi - Infineon',
                    'DU02': 'SÃ¼rÃ¼cÃ¼ Ãœnitesi - PerformanssÄ±z Ã–n SÃ¼rÃ¼cÃ¼ (Raven)',
                    'DV2W': 'Arka Tekerlekten Ã‡ekiÅŸ',
                    'DV4W': 'DÃ¶rt Tekerlekten Ã‡ekiÅŸ',
                    'EUSB': 'GÃ¼venlik AB Siyah',
                    'FBBB': 'Ã–n Fren Brembo Siyah',
                    'FBBR': 'Ã–n Fren Brembo KÄ±rmÄ±zÄ±',
                    'FC01': 'Ã–n Konsol EndÃ¼ktif Telefon Åarj CihazÄ±',
                    'FC02': 'Ã–n Konsol (Premium)',
                    'FC03': 'Ã–n Konsol 3.0',
                    'FC3P': 'Ã–n Konsol (Premium)',
                    'FCH2': 'Ã–n KontrolÃ¶r Sert v2 (FSD ve FSD dÄ±ÅŸÄ± destekler)',
                    'FD00': 'DÃ¼ÅŸÃ¼k AkÄ±m IGBT IM130 SÃ¼rÃ¼cÃ¼ Ãœnitesi',
                    'FD01': 'DÃ¼ÅŸÃ¼k AkÄ±m IGBT IM130 SÃ¼rÃ¼cÃ¼ Ãœnitesi, CN/DE',
                    'FD02': 'P2 Ã–n SÃ¼rÃ¼cÃ¼ Ãœnitesi',
                    'FD03': 'P2 KÄ±lÄ±flÄ± Ã–n SÃ¼rÃ¼cÃ¼ Ãœnitesi',
                    'FDU2': 'Raven Ã–n SÃ¼rÃ¼cÃ¼ Ãœnitesi',
                    'FG00': 'DÄ±ÅŸ AydÄ±nlatma Paketi Yok',
                    'FG01': 'Sis FarlarÄ±',
                    'FG02': 'DÄ±ÅŸ AydÄ±nlatma Paketi',
                    'FG31': 'Sis FarlarÄ±',
                    'FG3B': 'Sis FarÄ± KapaÄŸÄ± (Sis FarÄ± Yok)',
                    'FGF0': 'Sis FarlarÄ± Pasif',
                    'FGF1': 'Sis FarlarÄ± Aktif',
                    'FM3B': 'Performans Paketi Yok',
                    'FM3P': 'Performans Paketi',
                    'FM3S': 'YarÄ± DÃ¼ÅŸÃ¼rÃ¼lmÃ¼ÅŸ YazÄ±lÄ±m',
                    'FM3U': 'HÄ±zlanma ArtÄ±ÅŸÄ±',
                    'FMP6': 'Performans YazÄ±lÄ±mÄ±',
                    'FR01': 'Temel Ã–n SÄ±ra',
                    'FR02': 'HavalandÄ±rmalÄ± Ã–n Koltuklar',
                    'FR03': 'Ã–n SÄ±ra KoltuÄŸu',
                    'FR04': 'Ã–n SÄ±ra KoltuÄŸu',
                    'FR05': 'Ã–n SÄ±ra KoltuÄŸu',
                    'GLCN': 'Montaj',
                    'GLFR': 'Montaj',
                    'GLTL': 'Montaj',
                    'HC00': 'Ev Åarj Kurulumu Yok',
                    'HC01': 'Ev Åarj Kurulumu',
                    'HM30': 'Teknoloji Paketi - Homelink Yok',
                    'HM31': 'Teknoloji Paketi - Homelink',
                    'HP00': 'HPWC SipariÅŸ Edilmedi',
                    'HP01': 'HPWC SipariÅŸ Edildi',
                    'HP30': 'IsÄ± PompasÄ± YÃ¼klemesi Yok',
                    'HP31': 'IsÄ± PompasÄ± Tesisi',
                    'I36M': 'Arka SÃ¼rÃ¼cÃ¼ Ãœnitesi Ä°nvertÃ¶rÃ¼ 600A Mosfet',
                    'I38M': 'Arka SÃ¼rÃ¼cÃ¼ Ãœnitesi Ä°nvertÃ¶rÃ¼ 800A Mosfet',
                    'IBB0': 'Tamamen Siyah Ä°Ã§ Mekan',
                    'IBB1': 'Tamamen Siyah Ä°Ã§ Mekan',
                    'IBC00': 'Karbon Fiber Dekor ve Siyah Ä°Ã§ Mekan',
                    'IBE00': 'AhÅŸap Dekor ve Siyah Ä°Ã§ Mekan',
                    'IBW0': 'Siyah ve Beyaz Ä°Ã§ Mekan',
                    'IBW1': 'Siyah ve Beyaz Ä°Ã§ Mekan',
                    'IC00': 'Siyah Renk Yolu',
                    'IC01': 'Beyaz Renk Yolu Ä°Ã§ Mekan',
                    'IC02': 'Krem Renk Yolu Ä°Ã§ Mekan',
                    'ICC00': 'Karbon Fiber Dekor ve Krem Ä°Ã§ Mekan',
                    'ICW00': 'AhÅŸap Dekor ve Krem Ä°Ã§ Mekan',
                    'ID00': 'Abanoz AhÅŸap Dekoru',
                    'ID02': 'Tamamen Siyah Premium Ä°Ã§ Mekan ve Karbon Fiber Dekor',
                    'ID03': 'Ceviz Kaplama (2021+ Model S/X)',
                    'ID3A': 'Ä°Ã§ Mekan Beyaz AlÃ¼minyum',
                    'ID3W': 'Ä°Ã§ Mekan AhÅŸap Dekoru',
                    'IDBA': 'Koyu KÃ¼l AhÅŸap Dekoru',
                    'IDBO': 'AÅŸÄ±lÄ± KÃ¼l AhÅŸap Dekoru',
                    'IDCF': 'Karbon Fiber Dekoru',
                    'IDHG': 'Parlak Yatay IP Dekoru',
                    'IDHM': 'Mat Obeche AhÅŸap Dekoru',
                    'IDLW': 'Dantel AÄŸacÄ± Dekoru',
                    'IDOG': 'Parlak Obeche AhÅŸap Dekoru',
                    'IDOK': 'MeÅŸe Dekoru',
                    'IDOM': 'Mat Obeche AhÅŸap Dekoru',
                    'IDPB': 'Piyano Siyah Dekoru',
                    'IL31': 'Ä°Ã§ Mekan Ambiant AydÄ±nlatma',
                    'ILF0': 'Ambiant AydÄ±nlatma Pasif',
                    'ILF1': 'Ambiant AydÄ±nlatma Aktif',
                    'IN3BB': 'Tam Siyah KÄ±smi Premium Ä°Ã§ Mekan',
                    'IN3BW': 'Siyah ve Beyaz Ä°Ã§ Mekan',
                    'IN3PB': 'Tam Siyah Premium Ä°Ã§ Mekan',
                    'IN3PW': 'Tam Beyaz Premium Ä°Ã§ Mekan',
                    'INB3C': 'AÃ§Ä±k Bej Premium Ä°Ã§ Mekan ve MeÅŸe Kaplama',
                    'INB3P': 'Tam Siyah Premium Ä°Ã§ Mekan/AÅŸÄ±lÄ± KÃ¼l',
                    'INBBW': 'Beyaz Ä°Ã§ Mekan',
                    'INBC3W': 'Premium Siyah ve Beyaz Ä°Ã§ Mekan ve Karbon Fiber Dekoru',
                    'INBFP': 'Klasik Siyah Ä°Ã§ Mekan',
                    'INBPP': 'Siyah Ä°Ã§ Mekan',
                    'INBPW': 'Beyaz Koltuklar Ä°Ã§ Mekan',
                    'INBTB': 'Ã‡ok Desenli Siyah Ä°Ã§ Mekan',
                    'INFBP': 'Siyah Premium Ä°Ã§ Mekan',
                    'INLPC': 'Krem Ä°Ã§ Mekan',
                    'INLPP': 'Siyah / AÃ§Ä±k Tavan Ä°Ã§ Mekan',
                    'INPB0': 'Tam Siyah Ä°Ã§ Mekan ve KapÄ± Panelinde AhÅŸap',
                    'INPB1': 'Tam Siyah Ä°Ã§ Mekan',
                    'INPW0': 'Siyah ve Beyaz Ä°Ã§ Mekan ve KapÄ± Panelinde AhÅŸap',
                    'INPW1': 'Siyah ve Beyaz Ä°Ã§ Mekan',
                    'INWPT': 'AÃ§Ä±k Kahverengi Ä°Ã§ Mekan',
                    'INYPB': 'Tam Siyah Premium Ä°Ã§ Mekan',
                    'INYPW': 'Siyah ve Beyaz Premium Ä°Ã§ Mekan',
                    'IPB0': 'Siyah Ä°Ã§ Mekan',
                    'IPB1': 'Siyah Ä°Ã§ Mekan',
                    'IPB2': 'Siyah Ä°Ã§ Mekan',
                    'IPB3': 'Siyah Ä°Ã§ Mekan',
                    'IPW0': 'Beyaz Ä°Ã§ Mekan',
                    'IPW1': 'Beyaz Ä°Ã§ Mekan',
                    'IPW2': 'Beyaz Ä°Ã§ Mekan',
                    'IPW3': 'Beyaz Ä°Ã§ Mekan',
                    'IVBPP': 'Tam Siyah Ä°Ã§ Mekan',
                    'IVBSW': 'Ultra Beyaz Ä°Ã§ Mekan',
                    'IVBTB': 'Tam Siyah Ä°Ã§ Mekan',
                    'IVLPC': 'Vegan Krem Ä°Ã§ Mekan',
                    'IWC00': 'Karbon Fiber Dekor ve Siyah ve Beyaz Ä°Ã§ Mekan',
                    'IWW00': 'AhÅŸap Dekor ve Siyah ve Beyaz Ä°Ã§ Mekan',
                    'IX00': 'GeniÅŸletilmiÅŸ Nappa Deri Kaplama Yok',
                    'IX01': 'GeniÅŸletilmiÅŸ Nappa Deri Kaplama',
                    'LLP1': 'Kuzey Amerika Plaka AÃ§Ä±lÄ±r Kapak Tipi',
                    'LLP2': 'Avrupa Plaka AÃ§Ä±lÄ±r Kapak Tipi',
                    'LP00': 'AydÄ±nlatma Paketi Yok',
                    'LP01': 'AydÄ±nlatma Paketi',
                    'LS01': 'Åanghay Ãœretim HattÄ± - Faz 1',
                    'LS02': 'Åanghay Ãœretim HattÄ± - Faz 2.2',
                    'LT00': 'Vegan Ä°Ã§ Mekan',
                    'LT01': 'Standart Ä°Ã§ Mekan',
                    'LT03': 'Ä°Ã§ Mekan',
                    'LT1B': 'Alt Trim',
                    'LT3W': 'Alt Trim',
                    'LT4B': 'Alt Trim',
                    'LT4C': 'Alt Trim',
                    'LT4W': 'Alt Trim',
                    'LT5C': 'Alt Trim',
                    'LT5P': 'Siyah PUR Premium Alt Trim ve Siyah IP',
                    'LT5W': 'Alt Trim Siyah PUR ve Beyaz Ä°Ã§ Mekan',
                    'LT6P': 'Siyah PUR Alt Trim ve Performans DikiÅŸ',
                    'LT6W': 'Beyaz Temel Alt Trim',
                    'LTBC': 'Krem PUR Alt Trim ve Siyah HalÄ±lar',
                    'LTPB': 'Siyah PUR Alt Trim',
                    'LTPW': 'Beyaz PUR Alt Trim',
                    'LTSB': 'Standart Siyah Alt Trim',
                    'LVB0': '12V Asit DÃ¼ÅŸÃ¼k VoltajlÄ± Batarya',
                    'LVB1': '15V Li-Ion DÃ¼ÅŸÃ¼k VoltajlÄ± Batarya',
                    'LVB2': 'CATL 16V Batarya',
                    'M301': '2022 1. Nesil',
                    'M302': '2024 2. Nesil',
                    'MDL3': 'Model 3',
                    'MDLS': 'Model S',
                    'MDLX': 'Model X',
                    'ME01': 'Hafif Koltuklar',
                    'ME02': 'Koltuk HafÄ±zasÄ±',
                    'MI00': '1. Nesil Ãœretim',
                    'MI01': '2. Nesil Ãœretim',
                    'MI02': '3. Nesil Ãœretim',
                    'MI03': '4. Nesil Ãœretim',
                    'MI04': '5. Nesil Ãœretim',
                    'MI07': '8. Nesil Ãœretim',
                    'MR30': 'Teknoloji Paketi - Ayna Var',
            // ... (diÄŸer kodlar senin listesinden)
        };

        function startAuth() {
            console.log("ğŸ” startAuth fonksiyonu Ã§aÄŸrÄ±ldÄ±!");
            document.getElementById('loading-spinner').classList.remove('hidden');
            google.script.run
                .withSuccessHandler(displayAuthUrl)
                .withFailureHandler(displayError)
                .startAuthentication();
        }

        function displayAuthUrl(authData) {
            console.log("âœ… displayAuthUrl Ã§aÄŸrÄ±ldÄ±:", authData);
            document.getElementById('loading-spinner').classList.add('hidden');
            const authUrl = authData.authUrl;
            const authLink = document.getElementById('auth-link');
            authLink.href = authUrl;
            authLink.innerText = authUrl;
            authLink.classList.remove('hidden');
            document.getElementById('code-input-section').classList.remove('hidden');
        }

        function submitCode() {
            console.log("ğŸ“¤ submitCode fonksiyonu Ã§aÄŸrÄ±ldÄ±!");
            document.getElementById('loading-spinner').classList.remove('hidden');
            const codeInput = document.getElementById('auth-code').value;
            google.script.run
                .withSuccessHandler(displayOrders)
                .withFailureHandler(displayError)
                .exchangeCodeForTokens(codeInput);
        }

        function refreshOrders() {
            console.log("ğŸ”„ refreshOrders fonksiyonu Ã§aÄŸrÄ±ldÄ±!");
            document.getElementById('loading-spinner').classList.remove('hidden');
            google.script.run
                .withSuccessHandler(displayOrders)
                .withFailureHandler(displayError)
                .retrieveOrders();
        }

        function displayOrders(orders) {
            console.log("ğŸ“‹ displayOrders Ã§aÄŸrÄ±ldÄ±:", orders);
            document.getElementById('loading-spinner').classList.add('hidden');
            const ordersList = document.getElementById('orders-list');
            ordersList.innerHTML = '';
            orders.forEach(order => {
                const orderDiv = document.createElement('div');
                orderDiv.className = 'bg-gray-700 p-6 rounded-lg shadow-md';

                const registration = order.details.tasks?.deliveryDetails?.regData || {};
                const regDetails = registration.regDetails || {};
                const registrationAddress = registration.registrationAddress || {};
                const deliveryDetails = registration.deliveryDetails || {};
                const deliveryAddress = deliveryDetails.address || {};
                const scheduling = order.details.tasks?.scheduling || {};
                const finalPayment = order.details.tasks?.finalPayment?.data || {};
                const insurance = order.details.tasks?.insurance || {};
                const financing = order.details.tasks?.financing || {};
                const orderDetails = order.details.tasks?.registration?.orderDetails || {};

                // mktOptions'Ä± kullanÄ±cÄ± dostu hale getir
                const mktOptions = order.order.mktOptions
                    ? order.order.mktOptions.split(',').map(code => mktOptionsMap[code] || code).join(', ')
                    : 'Bilinmiyor';

                // Teslimat noktasÄ±
                const pickupLocation = locationMap[deliveryDetails.pickupLocationTrtId] || 'Bilinmeyen Teslimat NoktasÄ±';

                orderDiv.innerHTML = `
                    <h3 class="font-bold text-xl mb-4">âœ… SipariÅŸ Ã–zeti</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <p class="mb-2"><strong>ğŸ“‹ SipariÅŸ No:</strong> ${order.order.referenceNumber}</p>
                            <p class="mb-2"><strong>ğŸš— VIN:</strong> ${order.order.vin || 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸš˜ Model:</strong> ${order.order.modelCode === 'my' ? 'Model Y' : order.order.modelCode || 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸ› ï¸ KonfigÃ¼rasyon:</strong> ${mktOptions}</p>
                            <p class="mb-2"><strong>ğŸ“… SipariÅŸ Tarihi:</strong> ${orderDetails.orderPlacedDate ? new Date(orderDetails.orderPlacedDate).toLocaleDateString('tr-TR') : 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸ“… Rezervasyon Tarihi:</strong> ${orderDetails.orderBookedDate ? new Date(orderDetails.orderBookedDate).toLocaleDateString('tr-TR') : 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸ’° Rezervasyon Ã–demesi:</strong> ${orderDetails.orderAmount ? new Intl.NumberFormat('tr-TR', { style: 'currency', currency: 'TRY' }).format(orderDetails.orderAmount) : 'Bilinmiyor'}</p>
                        </div>
                        <div>
                            <p class="mb-2"><strong>ğŸ“ Kilometre:</strong> ${orderDetails.vehicleOdometer ? orderDetails.vehicleOdometer + ' ' + (orderDetails.vehicleOdometerType || 'km') : 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸŒ Ãœlke:</strong> ${order.order.countryCode || 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸ“ Yerel Ayar:</strong> ${order.order.locale || 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸ’¼ Ä°ÅŸletme SipariÅŸi:</strong> ${order.order.isB2b ? 'Evet' : 'HayÄ±r'}</p>
                            <p class="mb-2"><strong>ğŸ› ï¸ Tesla Assist:</strong> ${order.order.isTeslaAssistEnabled ? 'Evet' : 'HayÄ±r'}</p>
                            <p class="mb-2"><strong>ğŸš— KullanÄ±lmÄ±ÅŸ AraÃ§:</strong> ${order.order.isUsed ? 'Evet' : 'HayÄ±r'}</p>
                        </div>
                    </div>

                    <h3 class="font-bold text-xl mt-6 mb-4">ğŸ“… Teslimat Bilgileri</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <p class="mb-2"><strong>ğŸ•’ Tahmini Teslimat AralÄ±ÄŸÄ±:</strong> ${scheduling.deliveryWindowDisplay || 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸš› Merkeze Tahmini GeliÅŸ:</strong> ${finalPayment.etaToDeliveryCenter ? new Date(finalPayment.etaToDeliveryCenter).toLocaleDateString('tr-TR') : 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸ“… Teslimat Tarihi:</strong> ${scheduling.apptDateTimeAddressStr || 'Bilinmiyor'}</p>
                        </div>
                        <div>
                            <p class="mb-2"><strong>ğŸ“ Teslimat NoktasÄ±:</strong> ${pickupLocation}</p>
                            <p class="mb-2"><strong>ğŸšš Teslimat TÃ¼rÃ¼:</strong> ${deliveryDetails.deliveryType === 'PICKUP_SERVICE_CENTER' ? 'Servis Merkezi TeslimatÄ±' : deliveryDetails.deliveryType || 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>âœ… Teslimat Durumu:</strong> ${registration.complete ? 'TamamlandÄ±' : 'TamamlanmadÄ±'}</p>
                        </div>
                    </div>

                    <h3 class="font-bold text-xl mt-6 mb-4">ğŸ›¡ï¸ Sigorta Bilgileri</h3>
                    <p class="mb-2"><strong>Durum:</strong> ${insurance.status || 'Bilinmiyor'}</p>
                    <p class="mb-2"><strong>PoliÃ§e NumarasÄ±:</strong> ${insurance.insurancePolicyNumber || 'Bilinmiyor'}</p>

                    <h3 class="font-bold text-xl mt-6 mb-4">ğŸ’¸ Ã–deme Bilgileri</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <p class="mb-2"><strong>ğŸ’° Kalan Tutar:</strong> ${finalPayment.amountDue ? new Intl.NumberFormat('tr-TR', { style: 'currency', currency: 'TRY' }).format(finalPayment.amountDue) : 'Bilinmiyor'}</p>
                            <p class="mb-2"><strong>ğŸ’³ Ã–deme YÃ¶ntemi:</strong> ${registration.orderType === 'CASH' ? 'Nakit' : financing.messageBody || 'Bilinmiyor'}</p>
                        </div>
                        <div>
                            <p class="mb-2"><strong>ğŸ“‹ Ã–deme Durumu:</strong> ${finalPayment.complete ? 'TamamlandÄ±' : 'Bekleniyor'}</p>
                            <p class="mb-2"><strong>ğŸ“ˆ Finansman Durumu:</strong> ${financing.status || 'Bilinmiyor'}</p>
                        </div>
                    </div>
                `;
                ordersList.appendChild(orderDiv);
            });
            document.getElementById('orders-section').classList.remove('hidden');
        }

        function displayError(error) {
            console.error("ğŸš¨ Hata oluÅŸtu:", error);
            document.getElementById('loading-spinner').classList.add('hidden');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'bg-red-500 text-white p-4 rounded-lg mt-4';
            errorDiv.innerText = `Hata: ${error.message || 'Bilinmeyen bir hata oluÅŸtu.'}`;
            document.getElementById('orders-section').prepend(errorDiv);
        }
    </script>
</body>
</html>
